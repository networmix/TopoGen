output:
  scenario_metadata:
    title: "Small Test: East Coast, Clos_L16_S4 (Hose, one_to_one)"

  formatting:
    json_indent: 2
    yaml_anchors: true

  scenario_seed: 42

build:
  build_defaults:
    pop_per_metro: 2
    site_blueprint: SingleRouter
    dc_regions_per_metro: 0
    dc_region_blueprint: DCRegion
    intra_metro_link:
      capacity: 12_800
      cost: 1
      attrs: { link_type: intra_metro }
      role_pairs: ["core|leaf"]
    inter_metro_link:
      capacity: 3_200
      cost: 1
      attrs: { link_type: inter_metro_corridor }
      role_pairs: ["core|leaf"]
      mode: one_to_one
    dc_to_pop_link:
      capacity: 25_600
      cost: 1
      attrs: { link_type: dc_to_pop }
      role_pairs: ["dc|core", "dc|leaf"]
  build_overrides:
    - metros: [new-york-jersey-city-newark, columbus, washington-arlington]
      site_blueprint: Clos_L16_S4
      dc_regions_per_metro: 1
      dc_region_blueprint: DCRegion

  tm_sizing:
    enabled: true
    matrix_name: baseline_traffic_matrix
    quantum_gbps: 3200.0
    headroom: 1.3
    alpha_dc_to_pop: 1.2
    beta_intra_pop: 0.8
    flow_placement: EQUAL_BALANCED
    edge_select: ALL_MIN_COST
    respect_min_base_capacity: true

components:
  hw_component:
    core: CoreRouter
    leaf: LeafRouter
    spine: SpineRouter
    dc: {}
  optics:
    core|core: 800G-ZR+
    leaf|leaf: 800G-ZR+
    core|leaf: 800G-ZR+
    leaf|dc: 800G-ZR+
    core|dc: 800G-ZR+
    leaf|spine: 800G-DR4
    spine|leaf: 1600G-2xDR4

failure_policies:
  assignments:
    default: "mc_baseline"

workflows:
  assignments:
    default: "design_analysis_brief"

visualization:
  corridors:
    use_real_geometry: true
  site_graph:
    export: true
  blueprints:
    export: true

traffic:
  enabled: true
  model: hose
  samples: 1
  gbps_per_mw: 200.0
  mw_per_dc_region: 150.0
  priority_ratios:
    0: 1
  flow_policy_config:
    0: TE_UCMP_UNLIM
  matrix_name: baseline_traffic_matrix
  gravity:
    rounding_gbps: 100.0

data_sources:
  uac_polygons: "data/tl_2020_us_uac20.zip"
  tiger_roads: "data/tl_2024_us_primaryroads.zip"
  conus_boundary: "data/cb_2024_us_state_500k.zip"

projection:
  target_crs: "EPSG:5070"

clustering:
  metro_clusters: 5
  max_uac_radius_km: 100.0
  export_clusters: false
  export_integrated_graph: true

  override_metro_clusters:
    - "New York"
    - "Washington"
    - "Chicago"
    - "Atlanta"
    - "Columbus"

  coordinate_precision: 1
  area_precision: 2

highway_processing:
  min_edge_length_km: 0.0
  snap_precision_m: 150.0
  highway_classes: ["S1100"]
  min_cycle_nodes: 3
  filter_largest_component: true
  validation_sample_size: 5

corridors:
  k_paths: 1
  k_nearest: 6
  max_edge_km: 1000.0
  max_corridor_distance_km: 1500.0

  risk_groups:
    enabled: true
    group_prefix: "corridor_risk"
    exclude_metro_radius_shared: true

validation:
  max_metro_highway_distance_km: 50.0
  require_connected: true
  max_degree_threshold: 1000
  high_degree_warning: 20
  min_largest_component_fraction: 0.5
